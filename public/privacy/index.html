<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Informativa privacy Beach Radar" />
  <title>Beach Radar - Privacy</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet" />

  <style>
    :root {
      --bg-deep: #020617;
      --accent-cyan: #06b6d4;
      --accent-blue: #3b82f6;
      --text-white: #f8fafc;
      --text-gray: #94a3b8;
      --glass-surface: rgba(15, 23, 42, 0.7);
      --glass-border: rgba(255, 255, 255, 0.1);
      --glass-highlight: rgba(255, 255, 255, 0.05);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { width: 100%; min-height: 100%; }

    body {
      font-family: "Inter", sans-serif;
      background: radial-gradient(circle at top, #0f172a 0%, #020617 55%);
      color: var(--text-white);
      padding: 20px 14px 28px;
      overflow-y: auto;
    }

    .noise-overlay {
      position: fixed;
      inset: 0;
      background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
      pointer-events: none;
      z-index: 0;
      opacity: 0.35;
    }

    .page-shell {
      position: relative;
      z-index: 1;
      width: min(760px, 100%);
      margin: 0 auto;
    }

    .top-nav {
      display: flex;
      align-items: center;
      justify-content: flex-start;
      margin-bottom: 12px;
    }

    .top-nav a {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
      color: var(--text-white);
      font-size: 0.9rem;
      font-weight: 600;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid var(--glass-border);
      background: rgba(15, 23, 42, 0.78);
      backdrop-filter: blur(8px);
    }

    .top-nav a:hover {
      border-color: rgba(6, 182, 212, 0.42);
    }

    .top-nav a span {
      color: var(--accent-cyan);
    }

    .privacy-card {
      background: linear-gradient(135deg, var(--glass-surface), rgba(15, 23, 42, 0.45));
      border: 1px solid var(--glass-border);
      border-radius: 22px;
      padding: 32px 28px;
      box-shadow: 0 20px 60px rgba(2, 6, 23, 0.6);
      backdrop-filter: blur(14px);
    }

    h1 {
      font-family: "Space Grotesk", sans-serif;
      font-size: 2rem;
      letter-spacing: 0.02em;
      margin-bottom: 12px;
    }

    .lead {
      color: var(--text-gray);
      margin-bottom: 24px;
      line-height: 1.6;
    }

    .section {
      margin-bottom: 20px;
    }

    .section h2 {
      font-family: "Space Grotesk", sans-serif;
      font-size: 1.1rem;
      margin-bottom: 8px;
      color: var(--accent-cyan);
    }

    .section p,
    .section li {
      color: var(--text-gray);
      line-height: 1.6;
      font-size: 0.98rem;
    }

    .section ul {
      padding-left: 18px;
      display: grid;
      gap: 6px;
    }

    .meta {
      margin-top: 24px;
      padding-top: 16px;
      border-top: 1px solid var(--glass-border);
      display: flex;
      justify-content: flex-end;
      align-items: center;
      color: var(--text-gray);
      font-size: 0.85rem;
    }

    @media (max-width: 600px) {
      body {
        padding: 12px 10px 18px;
      }
      .top-nav {
        position: sticky;
        top: 0;
        z-index: 3;
        padding: 6px 0 10px;
        margin-bottom: 8px;
        background: linear-gradient(180deg, rgba(2, 6, 23, 0.92), rgba(2, 6, 23, 0.5), transparent);
      }
      .top-nav a {
        font-size: 0.84rem;
        padding: 9px 11px;
      }
      .privacy-card {
        border-radius: 16px;
        padding: 22px 16px;
      }
      h1 { font-size: 1.6rem; }
      .lead,
      .section p,
      .section li {
        font-size: 0.94rem;
      }
      .meta {
        justify-content: flex-start;
      }
    }
  </style>
</head>
<body>
  <div class="noise-overlay" aria-hidden="true"></div>

  <div class="page-shell">
    <nav class="top-nav" aria-label="Back navigation">
      <a id="backLink" href="/waitlist/"><span>&larr;</span><span id="backLabel">Back to waitlist</span></a>
    </nav>

    <main class="privacy-card">
      <h1 id="titleText">Privacy</h1>
      <p class="lead" id="leadText"></p>

      <section class="section">
        <h2 id="dataCollectedTitle"></h2>
        <ul id="dataCollectedList"></ul>
      </section>

      <section class="section">
        <h2 id="purposeTitle"></h2>
        <p id="purposeText"></p>
      </section>

      <section class="section">
        <h2 id="legalBasisTitle"></h2>
        <p id="legalBasisText"></p>
      </section>

      <section class="section">
        <h2 id="retentionTitle"></h2>
        <p id="retentionText"></p>
      </section>

      <section class="section">
        <h2 id="contactTitle"></h2>
        <p id="contactText"></p>
      </section>

      <div class="meta">
        <span id="lastUpdatedText"></span>
      </div>
    </main>
  </div>

  <script>
    const I18N = {
      it: {
        title: "Privacy",
        pageTitle: "Beach Radar - Privacy",
        pageDescription: "Informativa privacy Beach Radar",
        lead:
          "Questa pagina spiega quali dati raccogliamo per la waitlist di Beach Radar, perché li raccogliamo e come contattarci.",
        dataCollectedTitle: "Dati raccolti",
        dataCollectedItems: [
          "Indirizzo email e timestamp di iscrizione (prima/ultima registrazione).",
          "Parametri di attribuzione (UTM, poster, città e campi simili di tracking).",
          "Metadati tecnici (dispositivo, browser user agent, timezone, referrer/pagina).",
          "Dati di rete come indirizzo IP, usati per sicurezza e prevenzione abusi.",
        ],
        purposeTitle: "Finalità",
        purposeText:
          "Usiamo questi dati per gestire la waitlist e inviare comunicazioni legate al lancio.",
        legalBasisTitle: "Base giuridica",
        legalBasisText:
          "Trattiamo i dati sulla base del consenso fornito quando ti iscrivi alla waitlist.",
        retentionTitle: "Conservazione",
        retentionText:
          "Conserviamo i dati della waitlist fino al lancio e fino a 12 mesi successivi, oppure fino alla richiesta di cancellazione.",
        contactTitle: "Contatti",
        contactPrefix:
          "Per qualsiasi richiesta (accesso, cancellazione o chiarimenti), scrivi a",
        contactSuffix: ".",
        lastUpdated: "Ultimo aggiornamento: 28 gennaio 2026",
        backToWaitlist: "Torna alla waitlist",
        backToApp: "Torna all'app",
      },
      en: {
        title: "Privacy",
        pageTitle: "Beach Radar - Privacy",
        pageDescription: "Beach Radar privacy information",
        lead:
          "This page explains what data we collect for the Beach Radar waitlist, why we collect it, and how you can contact us.",
        dataCollectedTitle: "Data collected",
        dataCollectedItems: [
          "Email address and signup timestamps (first/last seen).",
          "Attribution parameters (UTM, poster, city, and similar tracking fields).",
          "Technical metadata (device info, browser user agent, timezone, referrer/page URL).",
          "Network data such as IP address, used for security and abuse prevention.",
        ],
        purposeTitle: "Purpose",
        purposeText:
          "We use this data to manage the waitlist and send launch-related communications.",
        legalBasisTitle: "Legal basis",
        legalBasisText:
          "We process your data based on consent provided when you join the waitlist.",
        retentionTitle: "Retention",
        retentionText:
          "We keep waitlist data until launch plus up to 12 months, or until you request deletion.",
        contactTitle: "Contact",
        contactPrefix:
          "For any request (access, deletion, or questions), email",
        contactSuffix: ".",
        lastUpdated: "Last updated: January 28, 2026",
        backToWaitlist: "Back to waitlist",
        backToApp: "Back to app",
      },
    };

    const isSupportedLang = (value) => value === "it" || value === "en";
    const tryReadLocalStorageLang = () => {
      try {
        const value = window.localStorage.getItem("br_lang_v1");
        return typeof value === "string" ? value.toLowerCase() : "";
      } catch {
        return "";
      }
    };
    const tryReadReferrerLang = () => {
      try {
        if (!document.referrer) return "";
        const refUrl = new URL(document.referrer);
        const lang = refUrl.searchParams.get("lang");
        return typeof lang === "string" ? lang.toLowerCase() : "";
      } catch {
        return "";
      }
    };

    const params = new URLSearchParams(window.location.search);
    const queryLang = (params.get("lang") || "").toLowerCase();
    const storedLang = tryReadLocalStorageLang();
    const referrerLang = tryReadReferrerLang();
    const browserLang = (navigator.language || "").toLowerCase().startsWith("it")
      ? "it"
      : "en";

    const resolvedLang = [queryLang, storedLang, referrerLang, browserLang].find(
      (value) => isSupportedLang(value),
    ) || "it";
    const t = I18N[resolvedLang];

    const backLinkEl = document.getElementById("backLink");
    const backLabelEl = document.getElementById("backLabel");
    const fromParam = params.get("from");
    const backParam = params.get("back");

    let fallbackHref = "/waitlist/";
    let fallbackLabel = t.backToWaitlist;

    const referrerPath = (() => {
      if (!document.referrer) return "";
      try {
        return new URL(document.referrer).pathname || "";
      } catch {
        return "";
      }
    })();

    if (
      fromParam === "app" ||
      referrerPath.startsWith("/app") ||
      referrerPath === "/register" ||
      referrerPath === "/app/register"
    ) {
      fallbackHref = "/app/";
      fallbackLabel = t.backToApp;
    }

    if (backParam) {
      try {
        const backUrl = new URL(backParam, window.location.origin);
        if (backUrl.origin === window.location.origin) {
          fallbackHref = `${backUrl.pathname}${backUrl.search}${backUrl.hash}`;
          fallbackLabel =
            backUrl.pathname.startsWith("/app") ||
            backUrl.pathname === "/register" ||
            backUrl.pathname === "/app/register"
              ? t.backToApp
              : t.backToWaitlist;
        }
      } catch {
        // Ignore invalid back param and keep fallback values.
      }
    }

    const titleEl = document.getElementById("titleText");
    const leadEl = document.getElementById("leadText");
    const dataCollectedTitleEl = document.getElementById("dataCollectedTitle");
    const dataCollectedListEl = document.getElementById("dataCollectedList");
    const purposeTitleEl = document.getElementById("purposeTitle");
    const purposeTextEl = document.getElementById("purposeText");
    const legalBasisTitleEl = document.getElementById("legalBasisTitle");
    const legalBasisTextEl = document.getElementById("legalBasisText");
    const retentionTitleEl = document.getElementById("retentionTitle");
    const retentionTextEl = document.getElementById("retentionText");
    const contactTitleEl = document.getElementById("contactTitle");
    const contactTextEl = document.getElementById("contactText");
    const lastUpdatedTextEl = document.getElementById("lastUpdatedText");

    document.documentElement.lang = resolvedLang;
    document.title = t.pageTitle;
    const descriptionMeta = document.querySelector("meta[name='description']");
    if (descriptionMeta) descriptionMeta.setAttribute("content", t.pageDescription);

    if (titleEl) titleEl.textContent = t.title;
    if (leadEl) leadEl.textContent = t.lead;
    if (dataCollectedTitleEl) dataCollectedTitleEl.textContent = t.dataCollectedTitle;
    if (purposeTitleEl) purposeTitleEl.textContent = t.purposeTitle;
    if (purposeTextEl) purposeTextEl.textContent = t.purposeText;
    if (legalBasisTitleEl) legalBasisTitleEl.textContent = t.legalBasisTitle;
    if (legalBasisTextEl) legalBasisTextEl.textContent = t.legalBasisText;
    if (retentionTitleEl) retentionTitleEl.textContent = t.retentionTitle;
    if (retentionTextEl) retentionTextEl.textContent = t.retentionText;
    if (contactTitleEl) contactTitleEl.textContent = t.contactTitle;
    if (lastUpdatedTextEl) lastUpdatedTextEl.textContent = t.lastUpdated;

    if (dataCollectedListEl) {
      dataCollectedListEl.innerHTML = "";
      t.dataCollectedItems.forEach((item) => {
        const li = document.createElement("li");
        li.textContent = item;
        dataCollectedListEl.appendChild(li);
      });
    }

    const contactEmail = window.PRIVACY_CONTACT_EMAIL || "privacy@beachradar.it";
    if (contactTextEl) {
      contactTextEl.innerHTML = `${t.contactPrefix} <a id=\"privacyContact\" href=\"mailto:${contactEmail}\">${contactEmail}</a>${t.contactSuffix}`;
    }

    if (backLinkEl) backLinkEl.setAttribute("href", fallbackHref);
    if (backLabelEl) backLabelEl.textContent = fallbackLabel;
  </script>
</body>
</html>
